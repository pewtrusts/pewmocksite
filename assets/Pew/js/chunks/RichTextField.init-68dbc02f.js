import { u as uniqueId } from "../index-generated.js";
import "./vendor-531aba48.js";
function linkHasOnlyText(link) {
  if (link.tagName !== "A") {
    console.warn("The provided element is not a link.");
    return false;
  }
  return Array.from(link.childNodes).every(
    (node) => node.nodeType === Node.TEXT_NODE
  );
}
function addExternalLinkIcons(rootEl) {
  const legacyExternalLinkSelectors = [
    ".link-item__external--blue",
    ".link-item__external--white",
    ".link-item__external"
  ];
  const newExternalLinkSelector = ".link--external";
  const links = rootEl.querySelectorAll(
    [...legacyExternalLinkSelectors, newExternalLinkSelector].join(",")
  );
  for (let link of links) {
    if (!linkHasOnlyText(link))
      return;
    link.classList.add("link", "link--icon", "link--external");
    const svg = `
      <svg
        focusable="false"
        aria-hidden="true"
        class="pew-icon"
        xmlns="http://www.w3.org/2000/svg"
      >
        <use
          aria-hidden="true"
          xlink:href="${window.assetsFolder}/svg-sprite.svg#external-link">
        </use>
      </svg>
    `;
    link.innerHTML = `<span>${link.textContent}</span>${svg}`;
  }
}
function initSnippetAccordion(accordionRoot) {
  const toggleEls = accordionRoot.querySelectorAll(
    ".rich-text__accordion-toggle"
  );
  if (toggleEls.length < 1)
    return;
  toggleEls.forEach((toggle, index) => {
    const content = toggle.nextElementSibling;
    if (!content || !content.classList.contains("rich-text__accordion-content"))
      return;
    const toggleId = uniqueId("accordion-toggle");
    const contentId = uniqueId("accordion-content");
    toggle.setAttribute("role", "button");
    toggle.setAttribute("tabindex", "0");
    toggle.setAttribute("id", toggleId);
    toggle.setAttribute("type", "button");
    toggle.setAttribute("aria-expanded", false);
    toggle.setAttribute("aria-controls", contentId);
    content.setAttribute("id", contentId);
    content.setAttribute("aria-labelledby", toggleId);
    const plusMinusEl = document.createElement("div");
    plusMinusEl.classList.add("rich-text__plus-minus");
    toggle.appendChild(plusMinusEl);
    const innerWrapper = document.createElement("div");
    innerWrapper.classList.add("rich-text__content-inner");
    while (content.firstChild) {
      innerWrapper.appendChild(content.firstChild);
    }
    content.appendChild(innerWrapper);
    toggle.addEventListener("click", (event) => {
      const isOpen = toggle.getAttribute("aria-expanded") === "true";
      toggle.setAttribute("aria-expanded", !isOpen);
    });
    toggle.addEventListener("keydown", (event) => {
      if (event.key === "Enter" || event.key === " ") {
        event.preventDefault();
        toggle.click();
      }
    });
  });
}
function initSnippetExpandMore(expandWrapper) {
  var _a, _b;
  const expandButton = expandWrapper == null ? void 0 : expandWrapper.querySelector(".rte-expand-button");
  if (!expandButton)
    return;
  let isExpanded = false;
  const contentToHide = [];
  let sibling = expandWrapper.nextElementSibling;
  while (sibling) {
    contentToHide.push(sibling);
    sibling = sibling.nextElementSibling;
  }
  const containerId = uniqueId("expandable-content");
  expandButton.setAttribute("aria-expanded", isExpanded);
  expandButton.setAttribute("aria-controls", containerId);
  const plusMinusEl = document.createElement("div");
  plusMinusEl.classList.add("rich-text__plus-minus");
  expandWrapper.appendChild(plusMinusEl);
  const container = document.createElement("section");
  container.setAttribute("id", containerId);
  container.setAttribute("aria-label", "Expanded content");
  container.setAttribute("tabindex", "-1");
  container.classList.add("expand-snippet__content-outer");
  const innerWrapper = document.createElement("div");
  innerWrapper.classList.add("rich-text-field");
  innerWrapper.classList.add("expand-snippet__content-inner");
  container.appendChild(innerWrapper);
  (_b = (_a = contentToHide[0]) == null ? void 0 : _a.parentNode) == null ? void 0 : _b.insertBefore(container, contentToHide[0]);
  contentToHide.forEach((el) => innerWrapper.appendChild(el));
  expandButton.addEventListener("click", () => {
    isExpanded = !isExpanded;
    expandButton.setAttribute("aria-expanded", isExpanded);
    if (isExpanded) {
      expandButton.value = "Collapse";
    } else {
      expandButton.value = "Expand";
    }
  });
  expandButton.addEventListener("keydown", (event) => {
    if (event.key === "Enter" || event.key === " ") {
      event.preventDefault();
      expandButton.click();
    }
  });
}
const initRichText = (el) => {
  addExternalLinkIcons(el);
  if (document.body.classList.contains("is-page-editor")) {
    return;
  }
  const accordions = el.querySelectorAll(".rich-text__accordion");
  if (accordions.length > 0) {
    accordions.forEach((accordion) => initSnippetAccordion(accordion));
  }
  const expandWrappers = el.querySelectorAll(".rich-text__expand-button");
  if (expandWrappers.length > 0) {
    expandWrappers.forEach((wrapper) => {
      initSnippetExpandMore(wrapper);
    });
  }
};
export {
  initRichText as default
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmljaFRleHRGaWVsZC5pbml0LTY4ZGJjMDJmLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9mcm9udGVuZC9qcy9jb21wb25lbnRzL1JpY2hUZXh0L1JpY2hUZXh0RmllbGQuaW5pdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdW5pcXVlSWQgZnJvbSBcIkBjb21tb24vdW5pcXVlSWRcIjtcclxuXHJcbmZ1bmN0aW9uIGxpbmtIYXNPbmx5VGV4dChsaW5rKSB7XHJcbiAgLy8gRW5zdXJlIGl0J3MgYW4gPGE+IGVsZW1lbnRcclxuICBpZiAobGluay50YWdOYW1lICE9PSBcIkFcIikge1xyXG4gICAgY29uc29sZS53YXJuKFwiVGhlIHByb3ZpZGVkIGVsZW1lbnQgaXMgbm90IGEgbGluay5cIik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBpZiBhbGwgY2hpbGQgbm9kZXMgYXJlIHRleHQgbm9kZXNcclxuICByZXR1cm4gQXJyYXkuZnJvbShsaW5rLmNoaWxkTm9kZXMpLmV2ZXJ5KFxyXG4gICAgKG5vZGUpID0+IG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFLFxyXG4gICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGRzIGV4dGVybmFsIGxpbmsgc3ZnIGljb25zIHRvIGxlZ2FjeSBhbmQgbmV3IGxpbmtzXHJcbiAqIHdpdGhpbiBhIHJvb3QgZWxlbWVudC5cclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcm9vdEVsXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cclxuZnVuY3Rpb24gYWRkRXh0ZXJuYWxMaW5rSWNvbnMocm9vdEVsKSB7XHJcbiAgY29uc3QgbGVnYWN5RXh0ZXJuYWxMaW5rU2VsZWN0b3JzID0gW1xyXG4gICAgXCIubGluay1pdGVtX19leHRlcm5hbC0tYmx1ZVwiLFxyXG4gICAgXCIubGluay1pdGVtX19leHRlcm5hbC0td2hpdGVcIixcclxuICAgIFwiLmxpbmstaXRlbV9fZXh0ZXJuYWxcIixcclxuICBdO1xyXG5cclxuICBjb25zdCBuZXdFeHRlcm5hbExpbmtTZWxlY3RvciA9IFwiLmxpbmstLWV4dGVybmFsXCI7XHJcblxyXG4gIGNvbnN0IGxpbmtzID0gcm9vdEVsLnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICBbLi4ubGVnYWN5RXh0ZXJuYWxMaW5rU2VsZWN0b3JzLCBuZXdFeHRlcm5hbExpbmtTZWxlY3Rvcl0uam9pbihcIixcIiksXHJcbiAgKTtcclxuXHJcbiAgZm9yIChsZXQgbGluayBvZiBsaW5rcykge1xyXG4gICAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgbGluayBoYXMgbm9uLXRleHQgbm9kZXNcclxuICAgIGlmICghbGlua0hhc09ubHlUZXh0KGxpbmspKSByZXR1cm47XHJcblxyXG4gICAgLy8gQXBwbHkgbmV3IGNsYXNzZXMgaWYgdGhleSBkb24ndCBoYXZlIHRoZW0gdG8gYXBwbHkgdGhlIHJpZ2h0IHN0eWxlc1xyXG4gICAgbGluay5jbGFzc0xpc3QuYWRkKFwibGlua1wiLCBcImxpbmstLWljb25cIiwgXCJsaW5rLS1leHRlcm5hbFwiKTtcclxuXHJcbiAgICBjb25zdCBzdmcgPSBgXHJcbiAgICAgIDxzdmdcclxuICAgICAgICBmb2N1c2FibGU9XCJmYWxzZVwiXHJcbiAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcclxuICAgICAgICBjbGFzcz1cInBldy1pY29uXCJcclxuICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcclxuICAgICAgPlxyXG4gICAgICAgIDx1c2VcclxuICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXHJcbiAgICAgICAgICB4bGluazpocmVmPVwiJHt3aW5kb3cuYXNzZXRzRm9sZGVyfS9zdmctc3ByaXRlLnN2ZyNleHRlcm5hbC1saW5rXCI+XHJcbiAgICAgICAgPC91c2U+XHJcbiAgICAgIDwvc3ZnPlxyXG4gICAgYDtcclxuXHJcbiAgICBsaW5rLmlubmVySFRNTCA9IGA8c3Bhbj4ke2xpbmsudGV4dENvbnRlbnR9PC9zcGFuPiR7c3ZnfWA7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gYWNjb3JkaW9uUm9vdFxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXHJcbmZ1bmN0aW9uIGluaXRTbmlwcGV0QWNjb3JkaW9uKGFjY29yZGlvblJvb3QpIHtcclxuICBjb25zdCB0b2dnbGVFbHMgPSBhY2NvcmRpb25Sb290LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICBcIi5yaWNoLXRleHRfX2FjY29yZGlvbi10b2dnbGVcIixcclxuICApO1xyXG5cclxuICBpZiAodG9nZ2xlRWxzLmxlbmd0aCA8IDEpIHJldHVybjtcclxuXHJcbiAgdG9nZ2xlRWxzLmZvckVhY2goKHRvZ2dsZSwgaW5kZXgpID0+IHtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSB0b2dnbGUubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cclxuICAgIGlmICghY29udGVudCB8fCAhY29udGVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJyaWNoLXRleHRfX2FjY29yZGlvbi1jb250ZW50XCIpKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgY29uc3QgdG9nZ2xlSWQgPSB1bmlxdWVJZChcImFjY29yZGlvbi10b2dnbGVcIik7XHJcbiAgICBjb25zdCBjb250ZW50SWQgPSB1bmlxdWVJZChcImFjY29yZGlvbi1jb250ZW50XCIpO1xyXG5cclxuICAgIC8vIFNldCB1cCBhdHRyaWJ1dGVzXHJcbiAgICB0b2dnbGUuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImJ1dHRvblwiKTtcclxuICAgIHRvZ2dsZS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIjBcIik7XHJcbiAgICB0b2dnbGUuc2V0QXR0cmlidXRlKFwiaWRcIiwgdG9nZ2xlSWQpO1xyXG4gICAgdG9nZ2xlLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XHJcbiAgICB0b2dnbGUuc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCBmYWxzZSk7XHJcbiAgICB0b2dnbGUuc2V0QXR0cmlidXRlKFwiYXJpYS1jb250cm9sc1wiLCBjb250ZW50SWQpO1xyXG4gICAgY29udGVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBjb250ZW50SWQpO1xyXG4gICAgY29udGVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsbGVkYnlcIiwgdG9nZ2xlSWQpO1xyXG5cclxuICAgIC8vIEFkZCBwbHVzL21pbnVzIGljb25cclxuICAgIGNvbnN0IHBsdXNNaW51c0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHBsdXNNaW51c0VsLmNsYXNzTGlzdC5hZGQoXCJyaWNoLXRleHRfX3BsdXMtbWludXNcIik7XHJcbiAgICB0b2dnbGUuYXBwZW5kQ2hpbGQocGx1c01pbnVzRWwpO1xyXG5cclxuICAgIC8vIEFkZCB3cmFwcGVyIGRpdiB3aXRoaW4gY29udGVudCB0byBtYWtlIGl0IGVhc2llciB0byBhbmltYXRlIG9wZW4vY2xvc2VcclxuICAgIGNvbnN0IGlubmVyV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBpbm5lcldyYXBwZXIuY2xhc3NMaXN0LmFkZChcInJpY2gtdGV4dF9fY29udGVudC1pbm5lclwiKTtcclxuXHJcbiAgICB3aGlsZSAoY29udGVudC5maXJzdENoaWxkKSB7XHJcbiAgICAgIGlubmVyV3JhcHBlci5hcHBlbmRDaGlsZChjb250ZW50LmZpcnN0Q2hpbGQpO1xyXG4gICAgfVxyXG4gICAgY29udGVudC5hcHBlbmRDaGlsZChpbm5lcldyYXBwZXIpO1xyXG5cclxuICAgIC8vIFRvZ2dsZSBldmVudCBsaXN0ZW5lcnNcclxuICAgIHRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IGlzT3BlbiA9IHRvZ2dsZS5nZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIpID09PSBcInRydWVcIjtcclxuICAgICAgdG9nZ2xlLnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIiwgIWlzT3Blbik7XHJcbiAgICB9KTtcclxuICAgIHRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiIHx8IGV2ZW50LmtleSA9PT0gXCIgXCIpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRvZ2dsZS5jbGljaygpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE1vdmVzIGFsbCBzaWJsaW5ncyBhZnRlciB0aGUgZXhwYW5kIGJ1dHRvblxyXG4gKiBpbnRvIGEgbmV3IGNvbnRhaW5lciBhbmQgZGlzcGxheXMgdGhlbSB3aGVuXHJcbiAqIHRoZSBidXR0b24gaXMgY2xpY2tlZC5cclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZXhwYW5kV3JhcHBlclxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXHJcbmZ1bmN0aW9uIGluaXRTbmlwcGV0RXhwYW5kTW9yZShleHBhbmRXcmFwcGVyKSB7XHJcbiAgY29uc3QgZXhwYW5kQnV0dG9uID0gZXhwYW5kV3JhcHBlcj8ucXVlcnlTZWxlY3RvcihcIi5ydGUtZXhwYW5kLWJ1dHRvblwiKTtcclxuXHJcbiAgaWYgKCFleHBhbmRCdXR0b24pIHJldHVybjtcclxuXHJcbiAgbGV0IGlzRXhwYW5kZWQgPSBmYWxzZTtcclxuXHJcbiAgLy8gRmluZCBhbGwgc2libGluZ3MgYWZ0ZXIgdGhlIGV4cGFuZCBidXR0b25cclxuICBjb25zdCBjb250ZW50VG9IaWRlID0gW107XHJcbiAgbGV0IHNpYmxpbmcgPSBleHBhbmRXcmFwcGVyLm5leHRFbGVtZW50U2libGluZztcclxuICB3aGlsZSAoc2libGluZykge1xyXG4gICAgY29udGVudFRvSGlkZS5wdXNoKHNpYmxpbmcpO1xyXG4gICAgc2libGluZyA9IHNpYmxpbmcubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gIH1cclxuXHJcbiAgLy8gQWRkIGFjY2Vzc2liaWxpdHkgYXR0cmlidXRlcyB0byBidXR0b25cclxuICBjb25zdCBjb250YWluZXJJZCA9IHVuaXF1ZUlkKFwiZXhwYW5kYWJsZS1jb250ZW50XCIpO1xyXG4gIGV4cGFuZEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIGlzRXhwYW5kZWQpO1xyXG4gIGV4cGFuZEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWNvbnRyb2xzXCIsIGNvbnRhaW5lcklkKTtcclxuXHJcbiAgLy8gQWRkIHBsdXMvbWludXMgaWNvblxyXG4gIGNvbnN0IHBsdXNNaW51c0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBwbHVzTWludXNFbC5jbGFzc0xpc3QuYWRkKFwicmljaC10ZXh0X19wbHVzLW1pbnVzXCIpO1xyXG4gIGV4cGFuZFdyYXBwZXIuYXBwZW5kQ2hpbGQocGx1c01pbnVzRWwpO1xyXG5cclxuICAvLyBDcmVhdGUgY29udGFpbmVyIGZvciBoaWRkZW4gY29udGVudFxyXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWN0aW9uXCIpO1xyXG4gIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBjb250YWluZXJJZCk7XHJcbiAgY29udGFpbmVyLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgXCJFeHBhbmRlZCBjb250ZW50XCIpO1xyXG4gIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIi0xXCIpO1xyXG4gIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiZXhwYW5kLXNuaXBwZXRfX2NvbnRlbnQtb3V0ZXJcIik7XHJcblxyXG4gIC8vIEFkZCB3cmFwcGVyIHdpdGhpbiBjb250YWluZXIgdG8gbWFrZSBpdCBlYXNpZXIgdG8gYW5pbWF0ZSBvcGVuL2Nsb3NlXHJcbiAgY29uc3QgaW5uZXJXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBpbm5lcldyYXBwZXIuY2xhc3NMaXN0LmFkZChcInJpY2gtdGV4dC1maWVsZFwiKTtcclxuICBpbm5lcldyYXBwZXIuY2xhc3NMaXN0LmFkZChcImV4cGFuZC1zbmlwcGV0X19jb250ZW50LWlubmVyXCIpO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbm5lcldyYXBwZXIpO1xyXG5cclxuICAvLyBJbnNlcnQgY29udGFpbmVyIGFmdGVyIHRoZSBidXR0b25cclxuICBjb250ZW50VG9IaWRlWzBdPy5wYXJlbnROb2RlPy5pbnNlcnRCZWZvcmUoY29udGFpbmVyLCBjb250ZW50VG9IaWRlWzBdKTtcclxuXHJcbiAgLy8gTW92ZSBzaWJsaW5ncyBpbnRvIGNvbnRhaW5lclxyXG4gIGNvbnRlbnRUb0hpZGUuZm9yRWFjaCgoZWwpID0+IGlubmVyV3JhcHBlci5hcHBlbmRDaGlsZChlbCkpO1xyXG5cclxuICAvLyBIYW5kbGUgZXhwYW5kIGJ1dHRvbiBjbGlja1xyXG4gIGV4cGFuZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgaXNFeHBhbmRlZCA9ICFpc0V4cGFuZGVkO1xyXG4gICAgZXhwYW5kQnV0dG9uLnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIiwgaXNFeHBhbmRlZCk7XHJcbiAgICBpZiAoaXNFeHBhbmRlZCkge1xyXG4gICAgICBleHBhbmRCdXR0b24udmFsdWUgPSBcIkNvbGxhcHNlXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBleHBhbmRCdXR0b24udmFsdWUgPSBcIkV4cGFuZFwiO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBleHBhbmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIgfHwgZXZlbnQua2V5ID09PSBcIiBcIikge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBleHBhbmRCdXR0b24uY2xpY2soKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuY29uc3QgaW5pdFJpY2hUZXh0ID0gKGVsKSA9PiB7XHJcbiAgYWRkRXh0ZXJuYWxMaW5rSWNvbnMoZWwpO1xyXG5cclxuICBpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy1wYWdlLWVkaXRvclwiKSkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgYWNjb3JkaW9ucyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmljaC10ZXh0X19hY2NvcmRpb25cIik7XHJcblxyXG4gIGlmIChhY2NvcmRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgIGFjY29yZGlvbnMuZm9yRWFjaCgoYWNjb3JkaW9uKSA9PiBpbml0U25pcHBldEFjY29yZGlvbihhY2NvcmRpb24pKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGV4cGFuZFdyYXBwZXJzID0gZWwucXVlcnlTZWxlY3RvckFsbChcIi5yaWNoLXRleHRfX2V4cGFuZC1idXR0b25cIik7XHJcblxyXG4gIGlmIChleHBhbmRXcmFwcGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICBleHBhbmRXcmFwcGVycy5mb3JFYWNoKCh3cmFwcGVyKSA9PiB7XHJcbiAgICAgIGluaXRTbmlwcGV0RXhwYW5kTW9yZSh3cmFwcGVyKTtcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGluaXRSaWNoVGV4dDtcclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsU0FBUyxnQkFBZ0IsTUFBTTtBQUU3QixNQUFJLEtBQUssWUFBWSxLQUFLO0FBQ3hCLFlBQVEsS0FBSyxxQ0FBcUM7QUFDbEQsV0FBTztBQUFBLEVBQ1I7QUFHRCxTQUFPLE1BQU0sS0FB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
